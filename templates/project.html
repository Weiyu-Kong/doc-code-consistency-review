<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>项目管理系统 - 需求-代码一致性审查平台</title>
    <link rel="stylesheet" href="/static/css/project.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="../static/js/thirdParty/element/index.css">
    <link rel="stylesheet" href="../static/js/thirdParty/element/index.iife.min.js">

    <script src="../static/js/thirdParty/vue.global.js"></script>
    <script src="../static/js/thirdParty/element/index.full.js"></script>
    <script src="../static/js/thirdParty/element/icons-vue.js"></script>
</head>
<body id="app">
    <!-- 顶部菜单栏 -->
    <div class="header">
        <div class="menu">
            <div class="menu-item">
                项目
                <div class="dropdown">
                    <div class="dropdown-item"><i class="fas fa-folder-plus"></i> 新的项目</div>
                    <div class="dropdown-item"><i class="fas fa-folder-open"></i> 导入项目</div>
                    <div class="dropdown-item"><i class="fas fa-file-export"></i> 导出项目</div>
                    <div class="dropdown-item" onclick="window.history.back()">
                        <i class="fas fa-times-circle"></i> 关闭项目
                    </div>
                </div>
            </div>
            <div class="menu-item">
                文件
                <div class="dropdown">
                    <div class="dropdown-item"><i class="fas fa-file-alt"></i> 添加需求文档</div>
                    <div class="dropdown-item"><i class="fas fa-file-code"></i> 添加代码文件</div>
                </div>
            </div>

            <!-- <div class="menu-item">
                视图
                <div class="dropdown">
                    <div class="dropdown-item" onclick="toggleBottomBar(true)"><i class="fas fa-search"></i> 问题单视图</div>
                    <div class="dropdown-item"><i class="fas fa-cogs"></i> 需求生成视图</div>
                </div>
            </div> -->

            <!-- <div class="menu-item">
                模式
                <div class="dropdown">
                    <div class="dropdown-item auto-mode active">
                        <i class="fas fa-robot"></i> 自动模式
                        <div class="submenu">
                            <div class="submenu-item"><i class="fas fa-sitemap"></i> 需求分解</div>
                            <div class="submenu-item"><i class="fas fa-link"></i> 开始对齐</div>
                            <div class="submenu-item"><i class="fas fa-search"></i> 开始审查</div>
                            <div class="submenu-item"><i class="fas fa-cogs"></i> 需求生成</div>
                        </div>
                    </div>
                    <div class="dropdown-item semi-auto-mode">
                        <i class="fas fa-bolt"></i> 半自动模式
                    </div>
                </div>
            </div> -->
        </div>
        <div class="view-switcher">
            <button id="statsButton" class="view-btn active" onclick="switchView('stats')">统计视图</button>
            <button id="alignmentButton" class="view-btn" onclick="switchView('alignment')">功能视图</button>
        </div>
    </div>
    
    <div class="main-container">
        <el-splitter>
            <el-splitter-panel  class="sidebar" collapsible size="200px">
                    <div class="sidebar-header">
                        <div class="sidebar-title">
                            <span id="projectName">${projectName}</span>
                        </div>
                    </div>
                    
                    <div class="file-tree">
                        <!-- 需求文档 -->
                        <div class="file-category">
                            <div class="category-header">
                                <i class="fas fa-file-alt"></i> <span>需求文档</span>
                            </div>
                            <div class="file-items">
                                <div class="file-item req-file">
                                    <i class="fas fa-file-word"></i>
                                    <span class="file-name">运载火箭ICD规范_v2.1.md</span>
                                    <span class="file-status">主文档</span>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 代码文件 -->
                        <div class="file-category">
                            <div class="category-header">
                                <i class="fas fa-code"></i> <span>代码文件 (4)</span>
                            </div>
                            <div class="file-items">
                                <div class="file-item code-file">
                                    <i class="fas fa-file-code"></i>
                                    <span class="file-name">rocket_interface.h</span>
                                </div>
                                <div class="file-item code-file">
                                    <i class="fas fa-file-code"></i>
                                    <span class="file-name">rocket_interface.cpp</span>
                                </div>
                                <div class="file-item code-file">
                                    <i class="fas fa-file-code"></i>
                                    <span class="file-name">communication_module.h</span>
                                </div>
                                <div class="file-item code-file">
                                    <i class="fas fa-file-code"></i>
                                    <span class="file-name">communication_module.cpp</span>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 项目元信息 -->
                        <div class="file-category">
                            <div class="category-header">
                                <i class="fas fa-cog"></i> <span>项目元信息 (3)</span>
                            </div>
                            <div class="file-items">
                                <div class="file-item proj-file">
                                    <i class="fas fa-project-diagram"></i>
                                    <span class="file-name">config.proj</span>
                                </div>
                                <div class="file-item proj-file">
                                    <i class="fas fa-history"></i>
                                    <span class="file-name">align_history.json</span>
                                </div>
                                <div class="file-item proj-file">
                                    <i class="fas fa-users"></i>
                                    <span class="file-name">review_history.json</span>
                                </div>
                            </div>
                        </div>
                    </div>
            </el-splitter-panel>

            <el-splitter-panel class="main-content">
                <!-- 项目视图（默认显示） -->
                <div class="stats-view" id="statsView">
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-title">
                                <i class="fas fa-file-alt"></i> 需求文档
                            </div>
                            <div class="stat-value">1</div>
                            <div class="stat-description">当前项目中的需求文档总数</div>
                        </div>
                        
                        <div class="stat-card">
                            <div class="stat-title">
                                <i class="fas fa-code"></i> 代码文件
                            </div>
                            <div class="stat-value">4</div>
                            <div class="stat-description">当前项目中的代码文件总数</div>
                        </div>
                        
                        <div class="stat-card">
                            <div class="stat-title">
                                <i class="fas fa-link"></i> 需求-代码对齐对数
                            </div>
                            <div class="stat-value">127</div>
                            <div class="stat-description">已确认的需求与代码对应关系</div>
                        </div>
                        
                        <div class="stat-card">
                            <div class="stat-title">
                                <i class="fas fa-bug"></i> 问题单总数
                            </div>
                            <div class="stat-value">42</div>
                            <div class="stat-description">发现的问题单条目总数</div>
                            <div class="progress-stat">
                                <div class="progress-label">
                                    <span>已解决</span>
                                    <span>78%</span>
                                </div>
                                <div class="progress-big">
                                    <div class="progress-big-bar" style="width: 78%"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <h3 style="margin-bottom: 15px; color: var(--text-primary);">
                        <i class="fas fa-file-alt"></i> 需求文档对齐进度
                    </h3>
                    <table class="files-table">
                        <thead>
                            <tr>
                                <th class="file-icon-cell"></th>
                                <th>文件名</th>
                                <th>对齐进度</th>
                                <th>对齐需求数</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td class="file-icon-cell"><i class="fas fa-file-pdf file-icon"></i></td>
                                <td>运载火箭ICD规范_v2.1.md</td>
                                <td class="file-progress-cell">
                                    <div class="file-progress">
                                        <span class="file-progress-value">85%</span>
                                        <div class="file-progress-bar">
                                            <div class="file-progress-fill" style="width: 85%"></div>
                                        </div>
                                    </div>
                                </td>
                                <td>76/89</td>
                            </tr>
                        </tbody>
                    </table>
                    
                    <h3 style="margin: 25px 0 15px; color: var(--text-primary);">
                        <i class="fas fa-code"></i> 代码文件对齐进度
                    </h3>
                    <table class="files-table">
                        <thead>
                            <tr>
                                <th class="file-icon-cell"></th>
                                <th>文件名</th>
                                <th>对齐进度</th>
                                <th>覆盖需求数</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td class="file-icon-cell"><i class="fas fa-file-code file-icon"></i></td>
                                <td>rocket_interface.h</td>
                                <td class="file-progress-cell">
                                    <div class="file-progress">
                                        <span class="file-progress-value">91%</span>
                                        <div class="file-progress-bar">
                                            <div class="file-progress-fill" style="width: 91%"></div>
                                        </div>
                                    </div>
                                </td>
                                <td>42/46</td>
                            </tr>
                            <tr>
                                <td class="file-icon-cell"><i class="fas fa-file-code file-icon"></i></td>
                                <td>rocket_interface.cpp</td>
                                <td class="file-progress-cell">
                                    <div class="file-progress">
                                        <span class="file-progress-value">78%</span>
                                        <div class="file-progress-bar">
                                            <div class="file-progress-fill" style="width: 78%"></div>
                                        </div>
                                    </div>
                                </td>
                                <td>35/45</td>
                            </tr>
                            <tr>
                                <td class="file-icon-cell"><i class="fas fa-file-code file-icon"></i></td>
                                <td>communication_module.h</td>
                                <td class="file-progress-cell">
                                    <div class="file-progress">
                                        <span class="file-progress-value">65%</span>
                                        <div class="file-progress-bar">
                                            <div class="file-progress-fill" style="width: 65%"></div>
                                        </div>
                                    </div>
                                </td>
                                <td>26/40</td>
                            </tr>
                            <tr>
                                <td class="file-icon-cell"><i class="fas fa-file-code file-icon"></i></td>
                                <td>communication_module.cpp</td>
                                <td class="file-progress-cell">
                                    <div class="file-progress">
                                        <span class="file-progress-value">82%</span>
                                        <div class="file-progress-bar">
                                            <div class="file-progress-fill" style="width: 82%"></div>
                                        </div>
                                    </div>
                                </td>
                                <td>24/29</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                
                <!-- 对齐视图 -->
                <div class="alignment-view split-view" id="alignmentView">
                    <el-splitter layout="vertical">
                        <!-- 上半部分 -->
                        <el-splitter-panel :min="200" size="80%">
                            <el-splitter>
                                <el-splitter-panel class="split-panel req-panel" :min="200" size="50%">
                                    <div class="panel-title">
                                        <i class="fas fa-file-word"></i> 运载火箭ICD规范_v2.1.md
                                    </div>
                                    <div class="content-card">
                                        <div class="content-text">
                                            <!-- 这里显示完整的需求文档内容 -->
                                            [需求文档内容区域]
                                        </div>
                                    </div>
                                </el-splitter-panel>
                                <el-splitter-panel class="split-panel code-panel" :min="200" size="50%">
                                    <div class="panel-title">
                                        <i class="fas fa-file-code"></i> rocket_interface.cpp
                                    </div>
                                    <div class="content-card">
                                        <div class="content-text">
                                            <!-- 这里显示完整的代码文件内容 -->
                                            [代码文件内容区域]
                                        </div>
                                    </div>
                                </el-splitter-panel>
                            </el-splitter>
                        </el-splitter-panel>

                        <!-- 底部问题单 -->
                        <el-splitter-panel  class="bottom-bar" id="bottomBar" collapsible>
                            <div class="bottom-bar-content">
                                <!-- 这里显示问题单的详细内容 -->
                                [问题单详细内容区域]
                            </div>
                        </el-splitter-panel>
                    </el-splitter>
                </div>
            </el-splitter-panel>
        </el-splitter>
    </div>
    <script src="/static/js/project.js"></script>
</body>
</html>