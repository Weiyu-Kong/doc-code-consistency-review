<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>项目管理系统 - 需求-代码一致性审查平台</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --bg-color: #f5f7f9;
            --header-bg: #2c3e50;
            --sidebar-bg: #34495e;
            --sidebar-width: 280px;
            --sidebar-min-width: 200px;
            --sidebar-max-width: 400px;
            --sidebar-collapsed-width: 50px;
            --text-primary: #2c3e50;
            --text-secondary: #7f8c8d;
            --text-light: #ecf0f1;
            --accent-color: #3498db;
            --accent-hover: #2980b9;
            --border-color: #bdc3c7;
            --item-hover: #3d566e;
            --menu-hover: #ecf0f1;
            --success-color: #2ecc71;
            --warning-color: #f39c12;
            --danger-color: #e74c3c;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', 'Microsoft YaHei', sans-serif;
        }
        
        body {
            background-color: var(--bg-color);
            color: var(--text-primary);
            height: 100vh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }
        
        /* 顶部菜单栏 */
        .header {
            background-color: var(--header-bg);
            color: var(--text-light);
            height: 40px;
            display: flex;
            align-items: center;
            padding: 0 20px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            z-index: 100;
        }
        
        .menu {
            display: flex;
            height: 100%;
        }
        
        .menu-item {
            position: relative;
            height: 100%;
            padding: 0 12px;
            display: flex;
            align-items: center;
            cursor: pointer;
            transition: background-color 0.2s;
            font-size: 13px;
        }
        
        .menu-item:hover {
            background-color: rgba(255,255,255,0.1);
        }
        
        .menu-item:hover .dropdown {
            display: block;
        }
        
        .dropdown {
            display: none;
            position: absolute;
            top: 100%;
            left: 0;
            background-color: white;
            min-width: 200px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            border-radius: 0 0 4px 4px;
            z-index: 1000;
        }
        
        .dropdown-item {
            padding: 10px 15px;
            color: var(--text-primary);
            display: flex;
            align-items: center;
            transition: background-color 0.2s;
            border-bottom: 1px solid #eee;
            font-size: 13px;
            cursor: pointer;
        }
        
        .dropdown-item i {
            margin-right: 10px;
            width: 20px;
            text-align: center;
            color: var(--accent-color);
        }
        
        .dropdown-item:hover {
            background-color: var(--menu-hover);
            color: var(--accent-hover);
        }
        
        .project-title {
            margin-left: auto;
            font-weight: 500;
            font-size: 14px;
            display: flex;
            align-items: center;
        }
        
        .project-title i {
            margin-right: 8px;
            color: #f1c40f;
        }
        
        /* 主内容区 */
        .main-container {
            display: flex;
            flex: 1;
            overflow: hidden;
        }
        
        /* 左侧侧边栏 */
        .sidebar {
            width: var(--sidebar-width);
            background-color: var(--sidebar-bg);
            color: var(--text-light);
            display: flex;
            flex-direction: column;
            position: relative;
            overflow: auto;
        }
        
        .sidebar-resizer {
            display: none;
        }
        
        .sidebar.collapsed {
            width: var(--sidebar-collapsed-width);
        }
        
        .sidebar.collapsed .sidebar-header,
        .sidebar.collapsed .file-tree,
        .sidebar.collapsed .file-item span,
        .sidebar.collapsed .progress-container {
            display: none;
        }
        
        .sidebar.collapsed .file-item {
            justify-content: center;
            padding: 10px;
        }
        
        .sidebar.collapsed .file-item i {
            margin-right: 0;
        }
        
        .sidebar-header {
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }
        
        .sidebar-title {
            font-weight: 600;
            font-size: 16px;
            display: flex;
            align-items: center;
        }
        
        .sidebar-title i {
            margin-right: 10px;
        }
        
        .toggle-btn {
            background: none;
            border: none;
            color: var(--text-light);
            cursor: pointer;
            font-size: 16px;
            padding: 5px;
            border-radius: 4px;
            position: absolute;
            right: 10px;
            top: 12px;
            z-index: 2;
            transition: all 0.3s;
        }

        .sidebar.collapsed .toggle-btn {
            position: static;
            margin: 10px auto;
            display: block;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .sidebar.collapsed .sidebar-title {
            display: none; /* 隐藏标题 */
        }
        
        .sidebar-header {
            position: relative;
            padding: 15px 20px;
            min-height: 50px; /* 确保有足够高度 */
        }

        .sidebar.collapsed .sidebar-header {
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            border-bottom: none;
        }

        .toggle-btn:hover {
            background-color: rgba(255,255,255,0.1);
        }
        
        .file-tree {
            flex: 1;
            overflow-y: auto;
            padding: 10px 0;
        }
        
        .file-category {
            margin-bottom: 15px;
        }
        
        .category-header {
            padding: 8px 20px;
            font-weight: 600;
            font-size: 14px;
            color: #95a5a6;
            display: flex;
            align-items: center;
            cursor: pointer;
        }
        
        .category-header i {
            margin-right: 8px;
            font-size: 14px;
        }
        
        .file-items {
            padding-left: 20px;
        }
        
        .file-item {
            padding: 8px 15px 8px 30px;
            display: flex;
            align-items: center;
            cursor: pointer;
            transition: background-color 0.2s;
            position: relative;
        }
        
        .file-item:hover {
            background-color: var(--item-hover);
        }
        
        .file-item.active {
            background-color: var(--item-hover);
        }
        
        .file-item.active::before {
            content: "";
            position: absolute;
            left: 0;
            top: 0;
            height: 100%;
            width: 3px;
            background-color: var(--accent-color);
        }
        
        .file-item i {
            margin-right: 10px;
            font-size: 14px;
            width: 16px;
            text-align: center;
        }
        
        .req-file i { color: #1abc9c; }
        .code-file i { color: #3498db; }
        .proj-file i { color: #f1c40f; }
        
        .file-name {
            font-size: 13px;
            flex: 1;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }
        
        .file-status {
            font-size: 11px;
            padding: 2px 6px;
            border-radius: 3px;
            background-color: rgba(255,255,255,0.1);
            margin-left: 8px;
        }
        
        .progress-container {
            width: 80px;
            height: 6px;
            background-color: rgba(0,0,0,0.1);
            border-radius: 3px;
            margin-left: 8px;
            overflow: hidden;
        }
        
        .progress-bar {
            height: 100%;
            background-color: var(--success-color);
            transition: width 0.3s;
        }
        
        /* 主体区域 */
        .main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            background-color: white;
            overflow: hidden;
        }
        
        /* 项目视图 */
        .stats-view {
            padding: 20px;
            overflow-y: auto;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            background-color: white;
            border-radius: 6px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            padding: 20px;
            transition: transform 0.2s;
        }
        
        .stat-card:hover {
            transform: translateY(-2px);
        }
        
        .stat-title {
            font-size: 14px;
            color: var(--text-secondary);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
        }
        
        .stat-title i {
            margin-right: 8px;
            color: var(--accent-color);
        }
        
        .stat-value {
            font-size: 28px;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 5px;
        }
        
        .stat-description {
            font-size: 13px;
            color: var(--text-secondary);
        }
        
        .progress-stat {
            margin-top: 10px;
        }
        
        .progress-label {
            display: flex;
            justify-content: space-between;
            font-size: 12px;
            margin-bottom: 5px;
        }
        
        .progress-big {
            height: 10px;
            background-color: #eee;
            border-radius: 5px;
            overflow: hidden;
        }
        
        .progress-big-bar {
            height: 100%;
            background-color: var(--accent-color);
        }
        
        /* 文件列表视图 */
        .files-table {
            width: 100%;
            border-collapse: collapse;
            background-color: white;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }
        
        .files-table th {
            text-align: left;
            padding: 12px 15px;
            background-color: #f8f9fa;
            font-weight: 600;
            font-size: 13px;
            color: var(--text-secondary);
            border-bottom: 1px solid var(--border-color);
        }
        
        .files-table td {
            padding: 12px 15px;
            font-size: 13px;
            border-bottom: 1px solid #eee;
        }
        
        .files-table tr:last-child td {
            border-bottom: none;
        }
        
        .files-table tr:hover td {
            background-color: #f8f9fa;
        }
        
        .file-icon-cell {
            width: 30px;
        }
        
        .file-icon {
            color: var(--accent-color);
        }
        
        .file-progress-cell {
            width: 150px;
        }
        
        .file-progress {
            display: flex;
            align-items: center;
        }
        
        .file-progress-value {
            width: 40px;
            text-align: right;
            margin-right: 10px;
            font-size: 12px;
            color: var(--text-secondary);
        }
        
        .file-progress-bar {
            flex: 1;
            height: 6px;
            background-color: #eee;
            border-radius: 3px;
            overflow: hidden;
        }
        
        .file-progress-fill {
            height: 100%;
            background-color: var(--success-color);
        }
        
        /* 分割视图通用样式 */
        .split-view {
            display: flex;
            flex: 1;
            overflow: hidden;
            position: relative;
        }
        
        .split-panel {
            overflow: auto;
            padding: 20px;
            position: relative;
        }
        
        /* 对齐视图 */
        .alignment-view {
            display: none;
        }
        
        .req-panel {
            flex: 1;
            border-right: 1px solid var(--border-color);
        }
        
        .code-panel {
            flex: 1;
        }
        
        /* 审查视图 */
        .review-view {
            display: none;
        }
        
        .issues-panel {
            flex: 2;
            border-right: 1px solid var(--border-color);
        }
        
        .analysis-panel {
            flex: 1;
        }
        
        /* 需求反生成视图 */
        .regen-view {
            display: none;
        }
        
        .original-req-panel {
            flex: 1;
            border-right: 1px solid var(--border-color);
        }
        
        .generated-req-panel {
            flex: 1;
        }
        
        /* 面板标题 */
        .panel-title {
            font-size: 18px;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            align-items: center;
        }
        
        .panel-title i {
            margin-right: 10px;
            color: var(--accent-color);
        }
        
        /* 内容样式 */
        .content-card {
            background-color: white;
            border-radius: 6px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            padding: 20px;
            margin-bottom: 20px;
        }
        
        .content-header {
            font-weight: 600;
            margin-bottom: 10px;
            color: var(--text-primary);
            display: flex;
            align-items: center;
        }
        
        .content-header i {
            margin-right: 8px;
            color: var(--accent-color);
        }
        
        .content-text {
            line-height: 1.6;
            color: var(--text-secondary);
            font-size: 14px;
        }
        
        .code-block {
            background-color: #2d2d2d;
            color: #f8f8f2;
            border-radius: 4px;
            padding: 15px;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 13px;
            margin: 15px 0;
            overflow: auto;
            line-height: 1.5;
        }
        
        .issue-item {
            padding: 12px 15px;
            border-bottom: 1px solid #eee;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        
        .issue-item:hover {
            background-color: #f9f9f9;
        }
        
        .issue-item.active {
            background-color: #e6f7ff;
            border-left: 3px solid var(--accent-color);
        }
        
        .issue-header {
            display: flex;
            align-items: center;
            margin-bottom: 8px;
        }
        
        .issue-type {
            font-size: 12px;
            padding: 3px 8px;
            border-radius: 3px;
            margin-right: 10px;
        }
        
        .issue-type.error {
            background-color: #ffccc7;
            color: #f5222d;
        }
        
        .issue-type.warning {
            background-color: #fffbe6;
            color: #faad14;
        }
        
        .issue-title {
            font-weight: 600;
            flex: 1;
        }
        
        .issue-description {
            font-size: 13px;
            color: var(--text-secondary);
            line-height: 1.5;
        }
        
        .issue-meta {
            font-size: 12px;
            color: #999;
            margin-top: 8px;
            display: flex;
            justify-content: space-between;
        }
        
        .req-item {
            padding: 10px 15px;
            margin-bottom: 10px;
            border-left: 3px solid #1abc9c;
            background-color: #f6ffed;
            border-radius: 0 4px 4px 0;
        }
        
        .req-item.generated {
            border-left-color: #3498db;
            background-color: #e6f7ff;
        }
        
        .req-id {
            font-weight: 600;
            margin-bottom: 5px;
            color: var(--text-primary);
        }
        
        .req-text {
            font-size: 14px;
            color: var(--text-secondary);
            line-height: 1.5;
        }
        
        .req-meta {
            font-size: 12px;
            color: #999;
            margin-top: 8px;
        }
        
        .diff-added {
            background-color: #f6ffed;
            color: #52c41a;
            padding: 2px 4px;
        }
        
        .diff-removed {
            background-color: #fff1f0;
            color: #f5222d;
            padding: 2px 4px;
            text-decoration: line-through;
        }

        .action-btn {
            background-color: var(--accent-color);
            color: white;
            border: none;
            border-radius: 4px;
            padding: 6px 12px;
            font-size: 13px;
            cursor: pointer;
            display: flex;
            align-items: center;
            transition: background-color 0.2s;
        }
        
        .action-btn i {
            margin-right: 4px;
            color: white; /* Set icon color to white */
        }
        
        .action-btn.secondary {
            background-color: #7f8c8d;
        }
        
        .action-btn:hover {
            background-color: var(--accent-hover);
        }
    </style>
</head>
<body>
    <!-- 顶部菜单栏 -->
    <div class="header">
        <div class="menu">
            <div class="menu-item">
                项目
                <div class="dropdown">
                    <div class="dropdown-item"><i class="fas fa-folder-plus"></i> 新的项目</div>
                    <div class="dropdown-item"><i class="fas fa-folder-open"></i> 导入项目</div>
                    <div class="dropdown-item"><i class="fas fa-file-export"></i> 导出项目</div>
                    <div class="dropdown-item" onclick="window.history.back()">
                        <i class="fas fa-times-circle"></i> 关闭项目
                    </div>
                </div>
            </div>
            <div class="menu-item">
                文件
                <div class="dropdown">
                    <div class="dropdown-item"><i class="fas fa-file-alt"></i> 添加需求文档</div>
                    <div class="dropdown-item"><i class="fas fa-file-code"></i> 添加代码文件</div>
                </div>
            </div>
            <div class="menu-item">
                视图
                <div class="dropdown">
                    <div class="dropdown-item" data-view="stats"><i class="fas fa-project-diagram"></i> 项目视图</div>
                    <div class="dropdown-item" data-view="alignment"><i class="fas fa-exchange-alt"></i> 对齐视图</div>
                    <div class="dropdown-item" data-view="review"><i class="fas fa-search"></i> 审查视图</div>
                    <div class="dropdown-item" data-view="regen"><i class="fas fa-cogs"></i> 需求生成视图</div>
                </div>
            </div>
        </div>
        
        <div class="project-title">
            <i class="fas fa-rocket"></i> 运载火箭接口控制文件（ICD）项目
        </div>
    </div>
    
    <div class="main-container">
        <!-- 左侧侧边栏 -->
        <div class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <div class="sidebar-title">
                    <i class="fas fa-folder-open"></i> <span>项目文件</span>
                </div>
                <button class="toggle-btn" id="toggleSidebar">
                    <i class="fas fa-chevron-left"></i>
                </button>
            </div>
            
            <div class="file-tree">
                <!-- 需求文档 -->
                <div class="file-category">
                    <div class="category-header">
                        <i class="fas fa-file-alt"></i> <span>需求文档</span>
                    </div>
                    <div class="file-items">
                        <div class="file-item req-file active">
                            <i class="fas fa-file-word"></i>
                            <span class="file-name">运载火箭ICD规范_v2.1.md</span>
                            <span class="file-status">主文档</span>
                        </div>
                    </div>
                </div>
                
                <!-- 代码文件 -->
                <div class="file-category">
                    <div class="category-header">
                        <i class="fas fa-code"></i> <span>代码文件 (4)</span>
                    </div>
                    <div class="file-items">
                        <div class="file-item code-file">
                            <i class="fas fa-file-code"></i>
                            <span class="file-name">rocket_interface.h</span>
                        </div>
                        <div class="file-item code-file">
                            <i class="fas fa-file-code"></i>
                            <span class="file-name">rocket_interface.cpp</span>
                        </div>
                        <div class="file-item code-file">
                            <i class="fas fa-file-code"></i>
                            <span class="file-name">communication_module.h</span>
                        </div>
                        <div class="file-item code-file">
                            <i class="fas fa-file-code"></i>
                            <span class="file-name">communication_module.cpp</span>
                        </div>
                    </div>
                </div>
                
                <!-- 项目元信息 -->
                <div class="file-category">
                    <div class="category-header">
                        <i class="fas fa-cog"></i> <span>项目元信息 (3)</span>
                    </div>
                    <div class="file-items">
                        <div class="file-item proj-file">
                            <i class="fas fa-project-diagram"></i>
                            <span class="file-name">config.proj</span>
                        </div>
                        <div class="file-item proj-file">
                            <i class="fas fa-history"></i>
                            <span class="file-name">align_history.json</span>
                        </div>
                        <div class="file-item proj-file">
                            <i class="fas fa-users"></i>
                            <span class="file-name">review_history.json</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- 主体区域 - 视图容器 -->
        <div class="main-content">
            <!-- 项目视图（默认显示） -->
            <div class="stats-view" id="statsView">
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-title">
                            <i class="fas fa-file-alt"></i> 需求文档
                        </div>
                        <div class="stat-value">3</div>
                        <div class="stat-description">当前项目中的需求文档总数</div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-title">
                            <i class="fas fa-code"></i> 代码文件
                        </div>
                        <div class="stat-value">4</div>
                        <div class="stat-description">当前项目中的代码文件总数</div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-title">
                            <i class="fas fa-link"></i> 需求-代码对齐对数
                        </div>
                        <div class="stat-value">127</div>
                        <div class="stat-description">已确认的需求与代码对应关系</div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-title">
                            <i class="fas fa-bug"></i> 问题单总数
                        </div>
                        <div class="stat-value">42</div>
                        <div class="stat-description">发现的问题单条目总数</div>
                        <div class="progress-stat">
                            <div class="progress-label">
                                <span>已解决</span>
                                <span>78%</span>
                            </div>
                            <div class="progress-big">
                                <div class="progress-big-bar" style="width: 78%"></div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <h3 style="margin-bottom: 15px; color: var(--text-primary);">
                    <i class="fas fa-file-alt"></i> 需求文档对齐进度
                </h3>
                <table class="files-table">
                    <thead>
                        <tr>
                            <th class="file-icon-cell"></th>
                            <th>文件名</th>
                            <th>对齐进度</th>
                            <th>对齐需求数</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="file-icon-cell"><i class="fas fa-file-pdf file-icon"></i></td>
                            <td>运载火箭ICD规范_v2.1.md</td>
                            <td class="file-progress-cell">
                                <div class="file-progress">
                                    <span class="file-progress-value">85%</span>
                                    <div class="file-progress-bar">
                                        <div class="file-progress-fill" style="width: 85%"></div>
                                    </div>
                                </div>
                            </td>
                            <td>76/89</td>
                        </tr>
                    </tbody>
                </table>
                
                <h3 style="margin: 25px 0 15px; color: var(--text-primary);">
                    <i class="fas fa-code"></i> 代码文件对齐进度
                </h3>
                <table class="files-table">
                    <thead>
                        <tr>
                            <th class="file-icon-cell"></th>
                            <th>文件名</th>
                            <th>对齐进度</th>
                            <th>覆盖需求数</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="file-icon-cell"><i class="fas fa-file-code file-icon"></i></td>
                            <td>rocket_interface.h</td>
                            <td class="file-progress-cell">
                                <div class="file-progress">
                                    <span class="file-progress-value">91%</span>
                                    <div class="file-progress-bar">
                                        <div class="file-progress-fill" style="width: 91%"></div>
                                    </div>
                                </div>
                            </td>
                            <td>42/46</td>
                        </tr>
                        <tr>
                            <td class="file-icon-cell"><i class="fas fa-file-code file-icon"></i></td>
                            <td>rocket_interface.cpp</td>
                            <td class="file-progress-cell">
                                <div class="file-progress">
                                    <span class="file-progress-value">78%</span>
                                    <div class="file-progress-bar">
                                        <div class="file-progress-fill" style="width: 78%"></div>
                                    </div>
                                </div>
                            </td>
                            <td>35/45</td>
                        </tr>
                        <tr>
                            <td class="file-icon-cell"><i class="fas fa-file-code file-icon"></i></td>
                            <td>communication_module.h</td>
                            <td class="file-progress-cell">
                                <div class="file-progress">
                                    <span class="file-progress-value">65%</span>
                                    <div class="file-progress-bar">
                                        <div class="file-progress-fill" style="width: 65%"></div>
                                    </div>
                                </div>
                            </td>
                            <td>26/40</td>
                        </tr>
                        <tr>
                            <td class="file-icon-cell"><i class="fas fa-file-code file-icon"></i></td>
                            <td>communication_module.cpp</td>
                            <td class="file-progress-cell">
                                <div class="file-progress">
                                    <span class="file-progress-value">82%</span>
                                    <div class="file-progress-bar">
                                        <div class="file-progress-fill" style="width: 82%"></div>
                                    </div>
                                </div>
                            </td>
                            <td>24/29</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            
            <!-- 对齐视图 -->
            <div class="alignment-view split-view" id="alignmentView">
                <div class="split-panel req-panel">
                    <div class="panel-title">
                        <i class="fas fa-file-word"></i> 运载火箭ICD规范_v2.1.md
                    </div>
                    
                    <div class="content-card">
                        <div class="content-text">
                            <!-- 这里显示完整的需求文档内容 -->
                            [需求文档内容区域]
                        </div>
                    </div>
                </div>
                
                
                <div class="split-panel code-panel">
                    <div class="panel-title">
                        <i class="fas fa-file-code"></i> rocket_interface.cpp
                    </div>
                    
                    <div class="content-card">
                        <div class="content-text">
                            <!-- 这里显示完整的代码文件内容 -->
                            [代码文件内容区域]
                        </div>
                    </div>
                </div>
            </div>

            
            <!-- 审查视图 -->
            <div class="review-view split-view" id="reviewView">
                <div class="split-panel issues-panel">
                    <div class="panel-title">
                        <i class="fas fa-bug"></i> 问题单列表
                        <div style="margin-left: auto; display: flex; gap: 10px;">
                            <button class="action-btn" onclick="previewPanel()">
                                <i class="fas fa-eye"></i> 预览
                            </button>
                            <button class="action-btn" onclick="exportPanel()">
                                <i class="fas fa-file-export"></i> 导出
                            </button>
                        </div>
                    </div>
                    
                    <div class="issue-item active">
                        <div class="issue-header">
                            <span class="issue-type error">严重</span>
                            <span class="issue-title">未实现冗余链路切换功能</span>
                        </div>
                        <div class="issue-description">
                            需求REQ-ICD-005要求当主通信链路中断时，系统应在200ms内自动切换至备用链路。当前实现中缺少链路状态监控和自动切换逻辑。
                        </div>
                        <div class="issue-meta">
                            <span>文件: rocket_interface.py</span>
                            <span>发现时间: 2023-11-15</span>
                        </div>
                    </div>
                
                    
                    <div class="issue-item">
                        <div class="issue-header">
                            <span class="issue-type warning">中等</span>
                            <span class="issue-title">缺少阈值配置接口</span>
                        </div>
                        <div class="issue-description">
                            需求REQ-ICD-004要求系统支持预设阈值。当前实现中阈值硬编码在代码中，缺乏动态配置机制。
                        </div>
                        <div class="issue-meta">
                            <span>文件: alert_system.py</span>
                            <span>发现时间: 2023-11-22</span>
                        </div>
                    </div>
                    
                    <div class="issue-item">
                        <div class="issue-header">
                            <span class="issue-type warning">中等</span>
                            <span class="issue-title">未处理数据采样率配置</span>
                        </div>
                        <div class="issue-description">
                            需求REQ-ICD-002要求支持至少100Hz的数据采样率。当前实现固定为100Hz，缺乏动态调整能力。
                        </div>
                        <div class="issue-meta">
                            <span>文件: telemetry_interface.py</span>
                            <span>发现时间: 2023-11-25</span>
                        </div>
                    </div>
                </div>
                
                
                <div class="split-panel analysis-panel">
                    <div class="panel-title">
                        <i class="fas fa-search"></i> 问题分析
                    </div>
                    
                    <div class="content-card">
                        <div class="content-header">
                            <i class="fas fa-bug"></i> 问题ID: ISSUE-005-001
                        </div>
                        <div class="content-text">
                            <strong>问题描述：</strong>未实现冗余链路切换功能<br>
                            <strong>相关需求：</strong>REQ-ICD-005<br>
                            <strong>影响等级：</strong>严重<br>
                            <strong>发现位置：</strong>rocket_interface.py (行 45-62)
                        </div>
                        
                        <div class="content-header" style="margin-top: 15px;">
                            <i class="fas fa-lightbulb"></i> 问题分析
                        </div>
                        <div class="content-text">
                            当前代码中RedundantCommunication类只实现了链路切换的框架，但缺少以下关键功能：<br>
                            1. 主链路状态监控机制<br>
                            2. 链路中断检测算法<br>
                            3. 切换时间保障机制<br>
                            4. 切换后的链路健康检查<br><br>
                            
                            这导致系统无法满足需求中"当主通信链路中断时，系统应在200ms内自动切换至备用链路"的要求。
                        </div>
                        
                        <div class="content-header" style="margin-top: 15px;">
                            <i class="fas fa-wrench"></i> 建议解决方案
                        </div>
                        <div class="content-text">
                            1. 实现链路健康监控器，定期检查主链路状态<br>
                            2. 添加链路中断检测逻辑（如连续3次传输失败）<br>
                            3. 记录最后一次成功传输时间，精确控制切换时间<br>
                            4. 添加切换后的链路验证机制<br>
                            5. 实现主链路恢复后的自动回切功能
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- 需求反生成视图 -->
            <div class="regen-view split-view" id="regenView">
                <div class="split-panel original-req-panel">
                    <div class="panel-title">
                        <i class="fas fa-file-alt"></i> 原始需求
                    </div>
                    
                    <div class="content-card">
                        <div class="content-text">
                            <!-- 这里显示完整的原始需求文档 -->
                            [原始需求文档内容区域]
                        </div>
                    </div>
                </div>
                
                
                <div class="split-panel generated-req-panel">
                    <div class="panel-title">
                        <i class="fas fa-cogs"></i> 反向生成的需求
                    </div>
                    
                    <div class="req-item generated">
                        <div class="req-id">GEN-REQ-001</div>
                        <div class="req-text">
                            从 rocket_interface.py 第45-62行代码生成：系统需要实现冗余通信链路自动切换功能，在主链路中断时应在200ms内切换到备用链路。
                        </div>
                        <div class="req-meta">来源: rocket_interface.py | 生成时间: 2023-11-30</div>
                    </div>
                    
                    <div class="req-item generated">
                        <div class="req-id">GEN-REQ-002</div>
                        <div class="req-text">
                            从 TelemetryController.java 第112-135行代码生成：系统需要支持动态配置遥测数据采样率，范围应在10Hz到1000Hz之间。
                        </div>
                        <div class="req-meta">来源: TelemetryController.java | 生成时间: 2023-11-30</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // 当前活动视图
        let activeView = 'statsView';
        
        // 初始化视图
        function initViews() {
            // 显示默认视图
            document.getElementById('statsView').style.display = 'block';
            
            // 设置分割视图
            setupSplitView('alignmentView', 'alignmentHandle', 50);
            setupSplitView('reviewView', 'reviewHandle', 70);
            setupSplitView('regenView', 'regenHandle', 50);
        }
        
        // 设置分割视图
        function setupSplitView(viewId, handleId, initialPercent) {
            const view = document.getElementById(viewId);
            const handle = document.getElementById(handleId);
            const panels = view.querySelectorAll('.split-panel');
            
            if (panels.length !== 2) return;
            
            const leftPanel = panels[0];
            const rightPanel = panels[1];
            
            // 设置初始比例
            view.style.display = 'flex';
            leftPanel.style.flex = `0 0 ${initialPercent}%`;
            rightPanel.style.flex = `0 0 ${100 - initialPercent}%`;
            
            // 拖动调整大小
            handle.addEventListener('mousedown', (e) => {
                e.preventDefault();
                const startX = e.clientX;
                const leftWidth = leftPanel.offsetWidth;
                
                document.addEventListener('mousemove', doDrag);
                document.addEventListener('mouseup', stopDrag);
                
                function doDrag(e) {
                    const dx = e.clientX - startX;
                    const newLeftWidth = leftWidth + dx;
                    const totalWidth = view.offsetWidth;
                    
                    if (newLeftWidth > 100 && newLeftWidth < totalWidth - 100) {
                        const leftPercent = (newLeftWidth / totalWidth) * 100;
                        const rightPercent = 100 - leftPercent;
                        
                        leftPanel.style.flex = `0 0 ${leftPercent}%`;
                        rightPanel.style.flex = `0 0 ${rightPercent}%`;
                    }
                }
                
                function stopDrag() {
                    document.removeEventListener('mousemove', doDrag);
                    document.removeEventListener('mouseup', stopDrag);
                }
            });
            
            // 初始隐藏
            view.style.display = 'none';
        }
        
        // 切换视图
        function switchView(viewName) {
            // 隐藏所有视图
            document.getElementById('statsView').style.display = 'none';
            document.getElementById('alignmentView').style.display = 'none';
            document.getElementById('reviewView').style.display = 'none';
            document.getElementById('regenView').style.display = 'none';
            
            // 显示选中的视图
            const viewElement = document.getElementById(viewName + 'View');
            if (viewName === 'stats') {
                viewElement.style.display = 'block'; // 项目视图使用 block
            } else {
                viewElement.style.display = 'flex'; // 其他视图使用 flex
            }
            activeView = viewName + 'View';
        }
        
        // 视图菜单点击事件
        document.querySelectorAll('.dropdown-item[data-view]').forEach(item => {
            item.addEventListener('click', () => {
                const viewName = item.getAttribute('data-view');
                switchView(viewName);
            });
        });
        
        // 侧边栏折叠功能
        const toggleBtn = document.getElementById('toggleSidebar');
        const sidebar = document.getElementById('sidebar');
        
        toggleBtn.addEventListener('click', () => {
            sidebar.classList.toggle('collapsed');
            
            // 更新按钮图标
            const icon = toggleBtn.querySelector('i');
            if (sidebar.classList.contains('collapsed')) {
                icon.classList.remove('fa-chevron-left');
                icon.classList.add('fa-chevron-right');
            } else {
                icon.classList.remove('fa-chevron-right');
                icon.classList.add('fa-chevron-left');
            }
        });
        
        // 文件选择功能
        const fileItems = document.querySelectorAll('.file-item');
        fileItems.forEach(item => {
            item.addEventListener('click', () => {
                // 移除所有活动状态
                fileItems.forEach(i => i.classList.remove('active'));
                // 添加当前活动状态
                item.classList.add('active');
            });
        });
        
        // 问题项选择
        const issueItems = document.querySelectorAll('.issue-item');
        issueItems.forEach(item => {
            item.addEventListener('click', () => {
                issueItems.forEach(i => i.classList.remove('active'));
                item.classList.add('active');
            });
        });
        
        // 预览和导出功能（占位实现）
        function previewPanel() {
            alert('预览功能将在后续实现');
        }

        function exportPanel() {
            alert('导出功能将在后续实现');
        }
        
        // 初始化
        window.addEventListener('DOMContentLoaded', initViews);
    </script>
</body>
</html>