<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>需求-代码一致性审查平台</title>

    <link rel="stylesheet" href="../static/css/index.css">
    <link rel="stylesheet" href="../static/js/thirdParty/highlight/default.min.css">
    <link rel="stylesheet" href="../static/js/thirdParty/katex/katex.min.css">
    <link rel="stylesheet" href="../static/js/thirdParty/element/index.css">
    <link rel="stylesheet" href="../static/js/thirdParty/element/index.iife.min.js">

    <script src="../static/js/thirdParty/vue.global.js"></script>
    <script src="../static/js/thirdParty/katex/katex.min.js"></script>
    <script src="../static/js/thirdParty/auto-render.min.js"></script>
    <script src="../static/js/thirdParty/axios.min.js"></script>
    <script src="../static/js/thirdParty/marked.min.js"></script>
    <script src="../static/js/thirdParty/highlight/highlight.min.js"></script>
    <script src="../static/js/thirdParty/element/index.full.js"></script>
</head>
<body>
<div id="app">
    <header>
        <img src="../static/assets/Web Development Lineart_Find code.png" alt="Platform Icon" class="header-icon">
        <h1 class="title">需求-代码一致性审查平台</h1>
    </header>
    
    <el-splitter>
        <!-- 主内容 -->
        <el-splitter-panel size="70%" :min="600">
            <el-row class="main-content">
                <!-- 需求文档展示区 -->
                <section class="block" id="requirements">
                    <div class="section-header">
                        <h2>需求文档</h2>
                        <el-upload
                            class="upload-demo"
                            action=""
                            :auto-upload="false"
                            :on-change="handleRequirementUploadChange"
                            :on-remove="handleRequirementRemove"
                            accept=".md"
                            :file-list="requirementFileList"
                            :limit="1"
                            :on-exceed="handleRequirementExceed"
                        >
                            <el-button type="info" plain>打开需求文档</el-button>
                        </el-upload>                
                    </div>
                    <div v-html="requirements"></div>
                </section>
                <!-- 代码展示区 -->
                <section class="block" id="code">
                    <div class="section-header">
                        <h2>代码</h2>
                        <el-upload
                            class="upload-demo"
                            action=""
                            :auto-upload="false"
                            :on-change="handleUploadChange"
                            :on-remove="handleRemove"
                            multiple
                            accept=".h,.c,.cpp"
                            :file-list="fileList"
                        >
                            <el-button type="info" plain>打开代码文件</el-button>
                        </el-upload>
                    </div>
                    <el-collapse v-model="activeNames" @change="handleChange">
                        <el-collapse-item 
                            v-for="(file, index) in codeFiles" 
                            :key="index" 
                            :title="file.name" 
                            :name="index">
                            <pre><code class="language-cpp">${file.content}</code></pre>
                        </el-collapse-item>
                    </el-collapse>
                </section>
            </el-row>
        </el-splitter-panel>

        <!-- 侧边栏 -->
        <el-splitter-panel :min="200">
            <el-tabs class="tab-card" type="border-card">
                <el-tab-pane label="需求-代码对齐">
                    <el-button type="primary" @click="autoAlign">解析需求点并自动对齐</el-button>
                    <div class="requirement-points">
                        <div v-for="(point, index) in requirementPoints" :key="index" class="requirement-point">
                            <div class="requirement-header">
                                <span class="requirement-type">${ point.type }</span>
                                <span class="requirement-id">${ point.id }</span>
                            </div>
                            <div class="requirement-content">
                                <p>${ point.content }</p>
                            </div>
                            <div class="requirement-context">
                                <small>${ point.context }</small>
                            </div>
                            <div class="associated-code">
                                <h4>关联代码段:</h4>
                                <pre><code class="language-cpp">// Placeholder code for ${ point.id }</code></pre>
                            </div>
                        </div>
                    </div>
                </el-tab-pane>
                <el-tab-pane label="一致性审查">一致性审查</el-tab-pane>
            </el-tabs>
        </el-splitter-panel>
    </el-splitter>
</div>

<script src="../static/js/app.js"></script>
</body>
</html>

